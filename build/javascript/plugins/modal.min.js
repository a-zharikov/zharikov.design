$(document).ready((function(){function t(t,e,o,i){var n=$('<div class="modal" id="'+t+'"></div>');i&&n.addClass(i);var l=$('<div class="modal-overlay"></div>'),s=$('<div class="modal__preloader"><svg viewBox="25 25 50 50" class="p-progress-spinner-svg" style="animation-duration: 2s;"><circle cx="50" cy="50" r="20" stroke-miterlimit="10" class="p-progress-spinner-circle" fill="none" stroke-width="6"></circle></svg></div>'),d=$('<button class="button fab tertiary modal__close js-modal-close"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q-11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z"/></svg></button>');$.get(e,(function(e){n.html(e),n.append(s),n.append(d),$("body").append(l).append(n),n.addClass("__active"),l.click((function(){a(t)})),d.click((function(){a(t)})),o&&window[o](),function(t){t.find("textarea.language-css, textarea.language-js, textarea.language-html").each((function(){var t=$(this),a=t.val(),e=t.attr("class").match(/language-(\w+)/)[0],o=$("<pre></pre>"),i=$("<code></code>").addClass(e).text(a);o.append(i),t.replaceWith(o),Prism.highlightElement(i[0])}))}(n),function(t){t.find(".js-textarea-copy").click((function(){var t=$(this).closest(".textarea-code").find("textarea, code"),a=t.text()||t.val();navigator.clipboard.writeText(a).then((()=>{var t=$(this);t.addClass("__copy"),setTimeout((()=>{t.removeClass("__copy")}),2e3)}))}))}(n);var i=n.find("img"),c=n.find("iframe"),r=(i.length,c.length,[]);i.each((function(){r.push(new Promise(((t,a)=>{this.complete?t():($(this).on("load",t),$(this).on("error",a))})))})),c.each((function(){r.push(new Promise(((t,a)=>{$(this).on("load",t),$(this).on("error",a)})))})),Promise.all(r).then((function(){n.find(".modal__page").css("opacity","0").animate({opacity:1},500),setTimeout((function(){s.addClass("__hide")}),200)})).catch((function(){n.find(".modal__page").before("<div class='modal__error'>Ошибка загрузки ресурсов.</div>"),setTimeout((function(){s.addClass("__hide")}),200)}))}))}function a(t){$("#"+t).remove(),$(".modal-overlay").remove(),history.replaceState(null,null,window.location.pathname)}if($(".js-open-modal").click((function(a){a.preventDefault(),t($(this).attr("href").replace("#",""),$(this).data("url"),$(this).data("script"),$(this).data("modal")),history.pushState(null,null,$(this).attr("href"))})),$(window).on("popstate",(function(){window.location.hash||($(".modal").remove(),$(".modal-overlay").remove())})),window.location.hash){const a=window.location.hash.replace("#",""),e=$(`.js-open-modal[href="#${a}"]`);if(e.length){t(a,e.data("url"),e.data("script"),e.data("modal"))}}}));