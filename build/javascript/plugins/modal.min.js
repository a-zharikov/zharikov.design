$(document).ready((function(){function t(t,a,o,n){var i=$('<div class="modal" id="'+t+'"></div>');n&&i.addClass(n);var s=$('<div class="modal-overlay"></div>'),l=$('<div class="modal__preloader"><svg viewBox="25 25 50 50" class="p-progress-spinner-svg" style="animation-duration: 2s;"><circle cx="50" cy="50" r="20" stroke-miterlimit="10" class="p-progress-spinner-circle" fill="none" stroke-width="6"></circle></svg></div>'),d=$('<button class="button fab tertiary modal__close js-modal-close"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q-11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z"/></svg></button>');$.get(a,(function(a){i.html(a),i.append(l),i.append(d),$("body").append(s).append(i),i.addClass("__active"),s.click((function(){e(t)})),d.click((function(){e(t)})),$(document).on("keydown.modal",(function(a){27===a.keyCode&&e(t)}));var n=0;i.on("mousedown touchstart",(function(t){n=t.pageX||t.originalEvent.touches[0].pageX})),i.on("mouseup touchend",(function(a){var o=a.pageX||a.originalEvent.changedTouches[0].pageX;n-o>100&&e(t)})),o&&window[o](),function(t){t.find("textarea.language-css, textarea.language-js, textarea.language-html").each((function(){var t=$(this),e=t.val(),a=t.attr("class").match(/language-(\w+)/)[0],o=$("<pre></pre>"),n=$("<code></code>").addClass(a).text(e);o.append(n),t.replaceWith(o),Prism.highlightElement(n[0])}))}(i),function(t){t.find(".js-textarea-copy").click((function(){var t=$(this).closest(".textarea-code").find("textarea, code"),e=t.text()||t.val();navigator.clipboard.writeText(e).then((()=>{var t=$(this);t.addClass("__copy"),setTimeout((()=>{t.removeClass("__copy")}),2e3)}))}))}(i);var c=i.find("img"),r=i.find("iframe"),h=(c.length,r.length,[]);c.each((function(){h.push(new Promise(((t,e)=>{this.complete?t():($(this).on("load",t),$(this).on("error",e))})))})),r.each((function(){h.push(new Promise(((t,e)=>{$(this).on("load",t),$(this).on("error",e)})))})),Promise.all(h).then((function(){i.find(".modal__page").css("opacity","0").animate({opacity:1},500),setTimeout((function(){l.addClass("__hide")}),200)})).catch((function(){i.find(".modal__page").before("<div class='modal__error'>Ошибка загрузки ресурсов.</div>"),setTimeout((function(){l.addClass("__hide")}),200)}))}))}function e(t){$("#"+t).remove(),$(".modal-overlay").remove(),history.replaceState(null,null,window.location.pathname),$(document).off("keydown.modal")}if($(".js-open-modal").click((function(e){e.preventDefault(),t($(this).attr("href").replace("#",""),$(this).data("url"),$(this).data("script"),$(this).data("modal")),history.pushState(null,null,$(this).attr("href"))})),$(window).on("popstate",(function(){window.location.hash||($(".modal").remove(),$(".modal-overlay").remove())})),window.location.hash){const e=window.location.hash.replace("#",""),a=$(`.js-open-modal[href="#${e}"]`);if(a.length){t(e,a.data("url"),a.data("script"),a.data("modal"))}}}));